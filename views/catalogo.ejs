<!-- HERO minimal -->
<section
  class="container relative min-h-[30vh] rounded-lg overflow-hidden mb-12 pb-5"
>
  <!-- imagen de fondo (absolute) -->
  <img
    src="assets/img/header.jpg"
    alt="Header"
    class="absolute inset-0 w-full h-full object-cover rounded-2xl"
  />
  <!-- overlay oscuro -->
  <div
    class="absolute inset-0 w-full h-full bg-black/70 rounded-2xl backdrop-blur-sm"
  ></div>

  <!-- CONTENIDO CENTRADO: ocupa todo el hero y centra perfectamente -->
  <div
    class="absolute inset-0 z-10 flex items-center justify-center flex-col text-center px-4"
  >
    <h1 class="text-white text-7xl font-bold">Catalogo</h1>
    <h2 class="text-white text-xl mt-2">
      Explora nuestras colecciones y personaliza tu cuadro
    </h2>
  </div>
</section>

<div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
  <div class="lg:col-span-1">
    <!-- FILTROS MOBILE (acordeón nativo) -->
    <div class="lg:hidden">
      <details class="bg-zinc-900 rounded-lg p-3">
        <summary class="cursor-pointer select-none text-gray-100 font-semibold">
          Filtros
        </summary>
        <div class="mt-3 space-y-4">
          <%- include('partials/filtros-contenido', { search, categoria, subcategoria, categoriasParaFiltro, isMobile: true }) %>
        </div>
      </details>
    </div>

    <!-- SIDEBAR DESKTOP (visible en lg) -->
    <aside class="hidden lg:block bg-zinc-900 rounded-lg p-4 shadow">
      <div class="flex items-center justify-between mb-4">
        <h3 class="font-semibold text-lg">Filtros</h3>
        <a href="/catalogo" class="text-sm text-gray-400 hover:text-gray-200">Limpiar</a>
      </div>
      <div class="space-y-4">
        <%- include('partials/filtros-contenido', { search, categoria, subcategoria, categoriasParaFiltro, isMobile: false }) %>
      </div>
    </aside>
  </div>

  <!-- GRID de productos (3 columnas en lg) -->
  <section class="lg:col-span-3">
    <!-- control superior (solo maqueta) -->
    <div
      class="flex flex-col sm:flex-row items-center justify-between gap-3 mb-4"
    >
      <p class="text-sm text-gray-300">
        Mostrando
        <span class="font-semibold"><%= total %></span> resultados <%
        if (typeof categoria !== 'undefined' && categoria) { %> de la categoría
        <span class="font-semibold"> <%= categoria %> </span>
        <% } %> <% if (typeof subcategoria !== 'undefined' && subcategoria) { %>
        de la subcategoría
        <span class="font-semibold"><%= subcategoria %></span> <% } %>
      </p>
    </div>

    <div id="cuadrosContainer" class="grid gap-6 md:grid-cols-3 grid-cols-2">
      <% if(cuadros.length === 0){ %>
      <div class="col-span-full text-center py-10">
        <p class="text-zinc-400">No se encontraron cuadros con los filtros aplicados.</p>
        <a href="/catalogo" class="mt-4 inline-block px-4 py-2 bg-zinc-800 rounded-md hover:bg-zinc-700">Limpiar filtros</a>
      </div>
      <% }else {cuadros.forEach(p=> { %>
        <%- include('partials/cuadro-card', { cuadro: p }) %>
      <% })} %>
    </div>

    <!-- Paginación dinámica -->
    <% if (totalPages > 1) { %>
    <div class="mt-8 flex items-center justify-center gap-2" role="navigation" aria-label="Paginación de cuadros">
      <% 
        const queryParams = new URLSearchParams();
        if (categoria) queryParams.set('categoria', categoria);
        if (subcategoria) queryParams.set('subcategoria', subcategoria);
        if (search) queryParams.set('search', search);
        if (locals.limit) queryParams.set('limit', locals.limit);
      %>

      <!-- Botón Anterior -->
      <a href="?<%= queryParams.toString() %>&page=<%= currentPage - 1 %>"
         class="px-3 py-1 rounded-md bg-zinc-800 border border-gray-700 text-gray-100 <%= currentPage <= 1 ? 'pointer-events-none opacity-50' : '' %>"
         aria-disabled="<%= currentPage <= 1 %>"
         aria-label="Página anterior">
        Anterior
      </a>

      <!-- Números de página -->
      <div class="flex items-center gap-1">
        <% for (let i = 1; i <= totalPages; i++) { %>
          <a href="?<%= queryParams.toString() %>&page=<%= i %>"
             class="px-3 py-1 rounded-md <%= i === currentPage ? 'bg-blue-600 text-white' : 'bg-zinc-800 text-gray-100 border border-gray-700' %>"
             aria-current="<%= i === currentPage ? 'page' : false %>">
            <%= i %>
          </a>
        <% } %>
      </div>

      <!-- Botón Siguiente -->
      <a href="?<%= queryParams.toString() %>&page=<%= currentPage + 1 %>"
         class="px-3 py-1 rounded-md bg-zinc-800 border border-gray-700 text-gray-100 <%= currentPage >= totalPages ? 'pointer-events-none opacity-50' : '' %>"
         aria-disabled="<%= currentPage >= totalPages %>"
         aria-label="Página siguiente">
        Siguiente
      </a>
    </div>
    <% } %>
  </section>
</div>
